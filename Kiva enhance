desc:Kiva enhance

slider1:Cutoff=0.1<0.1,1>Cutoff

in_pin:left input
in_pin:right input
out_pin:left output
out_pin:right output

@init
lastLPFLeft = 0;
lastLPFRight = 0;

@slider

@block

@sample
real_cutoff = cutoff ^ 4;

lastLPFLeft  += (spl0 - lastLPFLeft) * real_cutoff;
lastLPFRight += (spl1 - lastLPFRight) * real_cutoff;

LPFLeft  = lastLPFLeft;
LPFRight = lastLPFRight;

HPFLeft  = (spl0 - LPFLeft) * (1 + 2 * cutoff ^ 3);
HPFRight = (spl1 - LPFRight) * (1 + 2 * cutoff ^ 3);

// TODO: SaturatedHPFLeft = ... etc

spl0 = HPFLeft;
spl1 = HPFRight;

lastLPFLeft = LPFLeft;
lastLPFRight = LPFRight;
